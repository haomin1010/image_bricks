æ•°æ®é›†ç”Ÿæˆ
æ•´ä¸ªå·¥ä½œæ¶‰åŠåˆ°æ¨¡å‹å¯¹äºç§¯æœ¨ç©ºé—´ç»“æ„çš„ç†è§£ä¸æ­å»ºçš„é•¿ç¨‹è§„åˆ’ï¼Œä»¥åŠæœºæ¢°è‡‚åœ¨éç»“æ„åŒ–ç¯å¢ƒä¸‹çš„çµå·§æ“ä½œä¸é”™è¯¯æ¢å¤ï¼Œæ¶‰åŠåˆ°åŒ…æ‹¬ç©ºé—´æ¨ç†ï¼Œç‰©ç†ç›´è§‰ï¼Œè¿åŠ¨è§„åˆ’ï¼Œå¼ºåŒ–å­¦ä¹ ç­‰å¤šæ–¹é¢è¯é¢˜ï¼Œåœ¨çŸ­æœŸå†…ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š
å®ç°åŸºäºä»¿çœŸç¯å¢ƒçš„VLMäº¤äº’æ¡†æ¶ï¼ŒVLMåŸºäºå¤šè½®äº¤äº’æ§åˆ¶åº•å±‚IKç®—æ³•ï¼Œå®ç°ç»“æ„åŒ–ç›¸åŒç§¯æœ¨çš„æ­å»ºã€‚æ€»å…±åˆ†ä¸ºä¸¤éƒ¨åˆ†å·¥ä½œï¼š
1. æ­å»ºç»“æ„å¤šæ ·çš„è¯„æµ‹æ•°æ®é›†ï¼Œå¹¶ä¸”å¯¹äºç°æœ‰å¼€é—­æºæ¨¡å‹å¯¹äºç‰©ç†æ­å»ºçš„å¼€ç¯è§„åˆ’èƒ½åŠ›è¿›è¡Œè¯¦ç»†è¯„æµ‹ä¸åˆ†æã€‚
2. å®ç°åŸºäºä»¿çœŸç¯å¢ƒçš„å¤šè½®äº¤äº’è®­ç»ƒä¸è¯„æµ‹æ¡†æ¶ï¼Œè¯„æµ‹æ¨¡å‹åœ¨å®é™…ç‰©ç†ä¸–ç•Œäº¤äº’çš„ç©ºé—´æ¨ç†ä¸è§„åˆ’èƒ½åŠ›ï¼Œå¹¶ä¸”æå‡ºå¯è¡Œçš„è®­ç»ƒèŒƒå¼ï¼Œåˆ©ç”¨ä¸ä»¿çœŸç¯å¢ƒçš„äº¤äº’æé«˜æ¨¡å‹å¯¹äºç©ºé—´çš„ç†è§£èƒ½åŠ›ã€‚
ä»»åŠ¡ï¼šç»™å®šä»¿çœŸä¸­çš„ç§¯æœ¨ç»“æ„ï¼Œé€šè¿‡æä¾›ä¸‰è§†å›¾ã€è½´æµ‹å›¾ç­‰ä¿¡æ¯ï¼Œæ¨¡å‹è‡ªä¸»è§„åˆ’æ­å»ºä¸ç§»åŠ¨é¡ºåºï¼Œæ­å»ºå¯¹åº”ä¸‰ç»´ç»“æ„ã€‚
éš¾åº¦ï¼šç§¯æœ¨ä¸ºå®Œå…¨ç›¸åŒçš„æ­£æ–¹ä½“ï¼Œæ•´é½æ’åˆ—ï¼Œç»“æ„æ•´ä½“ç¬¦åˆç‰©ç†è§„å¾‹ã€‚
ç›®æ ‡ï¼šæ¨¡å‹åº”å½“é€šè¿‡å¼€ç¯æ¨ç†æˆ–ä¸ä»¿çœŸç¯å¢ƒçš„é€æ­¥äº¤äº’ï¼Œæ¨ç†å‡ºç¬¦åˆç‰©ç†è§„å¾‹ä¸ç©ºé—´ä¾èµ–å…³ç³»çš„æ­å»ºåºåˆ—ï¼Œå¹¶ä¸”æœ€ç»ˆæ­å»ºçš„ç»“æ„åº”å½“ä¸å®é™…ç»“æ„ä¿æŒä¸€è‡´ã€‚
ä½¿ç”¨NVIDIA Isaac Sim 5.1.0
Isaac Sim çš„ä¼˜åŠ¿ï¼Œé€‚åˆç”¨æ¥æµ‹è¯• VLM
1. ç‰©ç†çœŸå®æ€§ (PhysX)ï¼šè‡ªå¸¦ç‰©ç†å¼•æ“ï¼Œè®©ç§¯æœ¨è‡ªç„¶æ‰è½å †å ï¼Œæˆ–è€…ä½¿ç”¨è„šæœ¬æ‘†æ”¾å¹¶æ£€æµ‹ç¢°æ’ã€‚è¿™å¤©ç„¶ä¿è¯äº†â€œç‰©ç†å¯æ­å»ºâ€å’Œâ€œé‡åŠ›ç¨³å®šâ€ã€‚
2. å…‰å½±çœŸå®æ€§ (RTX)ï¼šæ”¯æŒå…‰çº¿è¿½è¸ªï¼ˆRay Tracingï¼‰ï¼Œå¯ä»¥ç”Ÿæˆé€¼çœŸçš„é˜´å½±ã€é®æŒ¡ã€åå°„å’Œæè´¨çº¹ç†ã€‚è¿™å¯¹äºæµ‹è¯• VLM åœ¨çœŸå®ä¸–ç•Œçš„æ„ŸçŸ¥èƒ½åŠ›è‡³å…³é‡è¦ï¼ˆé¿å… VLM åªæ˜¯åœ¨â€œåšå‡ ä½•é¢˜â€ï¼Œè€Œæ˜¯åœ¨â€œçœ‹å›¾â€ï¼‰ã€‚
3. æ•°æ®æ ‡æ³¨è‡ªåŠ¨åŒ– (Replicator)ï¼šå¯ä»¥é€šè¿‡ Python è„šæœ¬è‡ªåŠ¨è·å–æ¯ä¸€ä¸ªæ–¹å—çš„ç²¾ç¡®åæ ‡å®Œå…¨ä¸éœ€è¦äººå·¥æ ‡æ³¨ã€‚
å®æ–½è·¯çº¿å›¾
1. åœºæ™¯æ­å»º (World Setup)
- ç§¯æœ¨è®¾è®¡ï¼šåˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„ Cubeï¼ˆç«‹æ–¹ä½“ï¼‰ä½œä¸ºé¢„åˆ¶ä½“ï¼ˆAssetï¼‰ã€‚
- é¢œè‰²/çº¹ç†ï¼šCurrently, we use the same color and mesh texture
- ç¯å¢ƒï¼šè®¾ç½®ä¸€ä¸ªç®€å•çš„åœ°é¢å’Œ HDRI å…‰ç…§ç¯å¢ƒã€‚å»ºè®®ä½¿ç”¨çº¯è‰²æˆ–ç®€å•çš„ç½‘æ ¼åœ°é¢ï¼Œå‡å°‘èƒŒæ™¯å¹²æ‰°
2. ç¨‹åºåŒ–ç”Ÿæˆ (Procedural Generation)
- å¤ç”¨ä¹‹å‰çš„é€»è¾‘ï¼šæŠŠä¹‹å‰å†™çš„ generate_stable_convex ç®—æ³•é€»è¾‘ç§»æ¤è¿›å»
```
import numpy as np
import matplotlib.pyplot as plt
import random
import csv
import os

class CustomSizeBuilder:
    def __init__(self):
        # === æ ¸å¿ƒè¦æ±‚ï¼šåæ ‡ç³»è¾¹ç•Œå›ºå®šä¸º 8x8x8 ===
        self.L = 8
        self.W = 8
        self.H = 8
        self.grid = np.zeros((8, 8, 8), dtype=bool)

    def generate_object(self, init_size=(8, 8, 8), scale_mode="medium"):
        """
        :param init_size: (lx, ly, lz) åŸå§‹æœªåˆ‡å‰²æ–¹å—çš„å¤§å° (å¿…é¡» <= 8)
        :param scale_mode: 'small', 'medium', 'large'
        """
        # 1. å‚æ•°æ ¡éªŒ
        ix, iy, iz = init_size
        ix, iy, iz = min(ix, 8), min(iy, 8), min(iz, 8)
        
        print(f"âš™ï¸  åˆå§‹åŒ–: ç”»å¸ƒ 8x8x8 | åˆå§‹æ–¹å— {ix}x{iy}x{iz} | æ¨¡å¼: {scale_mode}")

        # 2. è®¾å®šå‚æ•°
        if scale_mode == "small":
            num_cuts = 10; cut_offset_range = 0.5
        elif scale_mode == "medium":
            num_cuts = 5; cut_offset_range = 1.0
        else: # "large"
            num_cuts = 3; cut_offset_range = 2.0

        # 3. åˆå§‹åŒ–é«˜åº¦å›¾
        height_map = np.zeros((self.L, self.W))
        start_x = (self.L - ix) // 2
        start_y = (self.W - iy) // 2
        height_map[start_x : start_x+ix, start_y : start_y+iy] = float(iz)

        # 4. æ‰§è¡Œå‰Šå±±æ³• (å¸¦â€œé˜²æ¯ç­â€æ ¡éªŒ)
        center_x, center_y, center_z = self.L / 2, self.W / 2, iz / 2

        for i in range(num_cuts):
            # éšæœºç”Ÿæˆå¹³é¢
            angle = random.uniform(0, 2 * np.pi)
            tilt = random.uniform(0.5, 2.0) # ç¨å¾®å‡å°æœ€å¤§å€¾æ–œåº¦ï¼Œé˜²æ­¢åˆ‡å¤ªç‹ 
            nx, ny, nz = np.cos(angle)*tilt, np.sin(angle)*tilt, 1.0
            
            offset_factor = random.uniform(0.5, 1.5) * cut_offset_range
            px = center_x + (random.uniform(-1, 1) * ix/2 * offset_factor)
            py = center_y + (random.uniform(-1, 1) * iy/2 * offset_factor)
            
            # ã€ä¼˜åŒ–ç‚¹1ã€‘æé«˜æœ€ä½åˆ‡å‰²é«˜åº¦ï¼Œä¿æŠ¤åº•åº§
            # ä¹‹å‰æ˜¯ iz * 0.3ï¼Œç°åœ¨æé«˜åˆ° iz * 0.5ï¼Œä¿è¯è‡³å°‘ä¿ç•™ä¸€åŠé«˜åº¦çš„ä¸­å¿ƒç‚¹
            pz = center_z + (random.uniform(-1, 1) * iz/2 * offset_factor)
            pz = max(pz, iz * 0.5) 

            # è®¡ç®—å¹³é¢æˆªè·
            x_idx, y_idx = np.indices((self.L, self.W))
            plane_z = pz - (nx/nz)*(x_idx - px) - (ny/nz)*(y_idx - py)
            
            # ã€ä¼˜åŒ–ç‚¹2ï¼šæ ¸å¿ƒä¿®å¤ã€‘è¯•ç®—ä¸€ä¸‹ï¼Œçœ‹çœ‹åˆ‡å®Œå‰©å¤šå°‘
            temp_height_map = np.minimum(height_map, plane_z)
            
            # æ£€æŸ¥ï¼šå¦‚æœåˆ‡å®Œåï¼Œæœ€é«˜ç‚¹è¿ 1.0 éƒ½ä¸åˆ°ï¼ˆè¯´æ˜å…¨æ²¡äº†ï¼‰ï¼Œæˆ–è€…ä½“ç§¯å¤ªå°
            # np.max(temp_height_map) è·å–å½“å‰æœ€é«˜çš„é«˜åº¦
            if np.max(temp_height_map) < 1.0:
                # print(f"  âš ï¸ ç¬¬ {i+1} åˆ€å¤ªç‹ äº†ï¼Œè·³è¿‡ (ä¼šå¯¼è‡´ç‰©ä½“æ¶ˆå¤±)")
                continue # æ”¾å¼ƒè¿™ä¸€åˆ€ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯
            
            # å¦‚æœæ£€æŸ¥é€šè¿‡ï¼Œæ‰çœŸçš„åº”ç”¨åˆ‡å‰²
            height_map = temp_height_map

        # 5. è½¬ä¸ºä½“ç´ 
        self.grid = np.zeros((self.L, self.W, self.H), dtype=bool)
        for x in range(self.L):
            for y in range(self.W):
                h = int(np.clip(height_map[x, y], 0, self.H))
                if h > 0:
                    self.grid[x, y, :h] = True
        
        block_count = np.sum(self.grid)
        print(f"âœ… ç”Ÿæˆå®Œæˆï¼æœ€ç»ˆæ–¹å—æ•°: {block_count}")
        
        # ã€å…œåº•æœºåˆ¶ã€‘å¦‚æœä¸‡ä¸€è¿˜æ˜¯0 (æå°æ¦‚ç‡)ï¼Œé€’å½’é‡è¯•ä¸€æ¬¡
        if block_count == 0:
            print("âš ï¸ ç»“æœå¼‚å¸¸ï¼Œæ­£åœ¨è‡ªåŠ¨é‡è¯•...")
            self.generate_object(init_size, scale_mode)

    # ================= ä»¥ä¸‹æ˜¯ç»˜å›¾è¾…åŠ©åŠŸèƒ½ (ä¿æŒä¸å˜) =================
    def save_coordinates(self, filename="voxel_coordinates.csv"):
        if not np.any(self.grid): return
        coords = np.argwhere(self.grid)
        try:
            with open(filename, 'w', newline='') as f:
                writer = csv.writer(f)
                writer.writerow(["x", "y", "z"])
                writer.writerows(coords)
            print(f"ğŸ’¾ åæ ‡å·²ä¿å­˜è‡³: {os.path.abspath(filename)}")
        except Exception: pass

    def _draw_axis_panel(self, ax, data_bool, xlabel, ylabel, title, arrow_color):
        rows, cols = data_bool.shape
        X, Y = np.meshgrid(np.arange(cols + 1), np.arange(rows + 1))
        cmap = plt.cm.viridis.copy(); cmap.set_under('white')
        ax.pcolormesh(X, Y, data_bool.astype(float), cmap=cmap, vmin=0.1, vmax=1.0, edgecolors='k', linewidth=1.5, shading='flat')
        ax.set_aspect('equal')
        ax.set_title(title, fontsize=11, fontweight='bold', color=arrow_color)
        ax.set_xlabel(xlabel); ax.set_ylabel(ylabel)
        ax.set_xticks(np.arange(0, cols + 1, 1)); ax.set_yticks(np.arange(0, rows + 1, 1))
        ax.grid(True, linestyle=':', alpha=0.5)

    def _draw_3d_overview(self, ax):
        ax.voxels(self.grid, edgecolor='k', linewidth=0.8, alpha=0.9, cmap='viridis')
        # Arrows
        cx, cy, cz = 4, 4, 10
        ax.quiver(cx, cy, cz, 0, 0, -2, color='red', linewidth=2, arrow_length_ratio=0.3)
        ax.text(cx, cy, cz, "Top", color='red', ha='center', va='bottom')
        ax.quiver(cx, -2, 4, 0, 2, 0, color='green', linewidth=2, arrow_length_ratio=0.3)
        ax.text(cx, -2, 4, "Front", color='green', ha='center', va='top')
        ax.quiver(10, cy, 4, -2, 0, 0, color='blue', linewidth=2, arrow_length_ratio=0.3)
        ax.text(10, cy, 4, "Side", color='blue', ha='center', va='bottom')
        # Axis
        ax.set_box_aspect((8, 8, 8))
        ax.set_xticks(np.arange(0, 9, 1)); ax.set_yticks(np.arange(0, 9, 1)); ax.set_zticks(np.arange(0, 9, 1))
        ax.set_xlim(0, 8); ax.set_ylim(0, 8); ax.set_zlim(0, 8)
        ax.set_xlabel('X'); ax.set_ylabel('Y'); ax.set_zlabel('Z')
        ax.set_title("3D View (8x8x8 Canvas)", fontweight='bold')
        ax.view_init(elev=25, azim=-55)

    def save_all_images(self, output_dir="custom_output"):
        if not np.any(self.grid): return
        os.makedirs(output_dir, exist_ok=True)
        top_view = np.any(self.grid, axis=2).T
        front_view = np.any(self.grid, axis=1).T
        side_view = np.any(self.grid, axis=0).T
        
        # Save Combined
        fig = plt.figure(figsize=(14, 12))
        gs = fig.add_gridspec(2, 2)
        ax1 = fig.add_subplot(gs[0, 0]); self._draw_axis_panel(ax1, top_view, "X", "Y", "Top View", "red")
        ax2 = fig.add_subplot(gs[0, 1], projection='3d'); self._draw_3d_overview(ax2)
        ax3 = fig.add_subplot(gs[1, 0]); self._draw_axis_panel(ax3, front_view, "X", "Z", "Front View", "green")
        ax4 = fig.add_subplot(gs[1, 1]); self._draw_axis_panel(ax4, side_view, "Y", "Z", "Side View", "blue")
        plt.savefig(os.path.join(output_dir, "combined.png"), dpi=150, bbox_inches='tight')
        plt.show()

if __name__ == "__main__":
    builder = CustomSizeBuilder()
    
    # ---------------- ç”¨æˆ·è®¾ç½®åŒºåŸŸ ----------------
    # 1. è®¾ç½®åŸå§‹æœªåˆ‡å‰²æ–¹å—å¤§å° (é•¿, å®½, é«˜)ï¼Œæœ€å¤§ä¸è¶…è¿‡ 8
    initial_block_size = (8, 8, 8)  
    
    # 2. è®¾ç½®ç”Ÿæˆæ¨¡å¼: 'small', 'medium', 'large'
    target_scale = "medium"
    # ---------------------------------------------
    
    builder.generate_object(init_size=initial_block_size, scale_mode=target_scale)
    builder.save_coordinates("coords.csv")
    builder.save_all_images("custom_output")

```

3. ç›¸æœºé…ç½® (Camera Setup)
å›ºå®šå†…å‚ã€‚
åœ¨ Isaac Sim ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª Camera Primï¼Œå¹¶è®¾ç½®ä»¥ä¸‹å‚æ•°ä»¥æ¨¡æ‹ŸçœŸå®ç›¸æœºï¼š
- Focal Length (ç„¦è·)
- Horizontal Aperture (ä¼ æ„Ÿå™¨å®½åº¦)
- Resolution (åˆ†è¾¨ç‡)ï¼šä¾‹å¦‚ 224*224ã€‚
- Position (å¤–å‚)ï¼šè„šæœ¬åŒ–è®¾ç½® 5 ä¸ªä½ç½®ï¼š
  
  1. Top (ä¿¯è§†)
  2. Front (æ­£è§†)
  3. Side (ä¾§è§†)
  "Telephoto 45Â° High-Angle View" (é•¿ç„¦45åº¦é«˜ä¿¯è§’è§†å›¾)
  - è§†è§’ï¼š ä¿¯ä»°è§’ 45Â°ï¼Œæ–¹ä½è§’ 45Â°ã€‚
  4. Iso_1 (å³å‰ä¸Š)
  5. Iso_2 (å·¦åä¸Š)
4. Ground Truth å¯¼å‡º (JSON)
åœ¨æ‹æ‘„å›¾åƒçš„åŒæ—¶ï¼Œéå†åœºæ™¯ä¸­æ‰€æœ‰çš„ç§¯æœ¨ Primï¼Œè¯»å–å®ƒä»¬çš„å±æ€§ã€‚